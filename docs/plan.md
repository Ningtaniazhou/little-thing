# 啾啾小事 (Little Thing) — 项目计划

## 一、项目概述

**啾啾小事** 是一款治愈向的 Web App，帮助人们在无聊或心情低落时，通过"扭蛋"的方式随机获得一件当下就能做的小事，从而获得成就感，变得更有活力。

### 核心理念
- **治愈向**：温暖、柔软、没有压力，每件事都很小，做到就值得被肯定
- **即刻行动**：小肥鸟象征"想到了就立刻去做"——大大的头（想法）+ 小翅膀和腿（行动）
- **惊喜感**：扭蛋机机制带来随机的期待感和开箱乐趣

### 吉祥物：小肥鸟
基于实物毛绒玩偶设计（见 `docs/小肥鸟.jpg`）：
- 圆球形身体，头身一体
- 两颗小黑豆眼睛，位置偏下
- 小小的蓝灰色三角形嘴巴
- 两侧小小的毛茸茸翅膀
- 细细的蓝灰色小腿 + 小爪子

---

## 二、功能设计

### 2.1 核心交互流程

```
[首页 / 待机状态]
    扭蛋机 + 小肥鸟站在旁边（idle 微微摇晃）
    底部按钮："扭一下"
         │
         ▼ 点击按钮
[扭蛋动画]
    手柄旋转 → 机器抖动 → 彩色蛋滚出
    蛋的颜色对应任务主题
         │
         ▼
[开蛋动画]
    蛋裂开 → 对应主题色的小肥鸟弹出（Q弹动画）
         │
         ▼
[任务展示]
    小肥鸟站在屏幕中央
    头顶对话气泡展示"一件小事"
    气泡内容：任务文字 + 预估时间 + 分类标签
    底部按钮：
      「换一颗蛋 🔄」→ 重新扭蛋
      「我去做了 ✓」→ 进入完成流程
         │
         ▼ 点击"我去做了"
[完成反馈]
    小肥鸟开心跳跃动画
    冒出鼓励文字气泡
    本周完成计数 +1
```

### 2.2 主题色彩系统

不同主题的小事对应不同颜色的蛋壳和小肥鸟配色：

| 主题 | 蛋壳色 | 小肥鸟配色变化 | 情绪 |
|------|--------|---------------|------|
| 文学 | 淡紫 `#E8DFF5` | 紫色围巾/腮红 | 安静、沉思 |
| 艺术 | 淡橙 `#FFE5CC` | 橙色贝雷帽 | 创造、灵感 |
| 写作 | 淡蓝 `#D6EAF8` | 蓝色小蝴蝶结 | 表达、内省 |
| 音乐 | 淡粉 `#FADBD8` | 粉色耳机 | 感性、享受 |
| 放松 | 淡绿 `#D5F5E3` | 绿色小叶子头饰 | 平静、舒缓 |
| 好奇心 | 淡黄 `#FEF9E7` | 黄色小星星 | 探索、好奇 |
| 生活 | 暖米 `#FDEBD0` | 米色围裙 | 日常、温馨 |
| 家庭 | 淡珊瑚 `#FDEDEC` | 珊瑚色爱心 | 爱、联结 |
| 学习/学术 | 淡靛 `#D4E6F1` | 靛色小眼镜 | 专注、求知 |
| 帮助 | 淡桃 `#F5CBA7` | 桃色小翅膀高光 | 善意、温暖 |

> 注：小肥鸟的基础造型保持不变（白色圆身体），只通过小配饰或局部色彩变化来区分主题，保持角色一致性和可爱感。

### 2.3 任务来源

**双轨制：LLM 生成 + 本地预设**

1. **LLM 生成**（主要）：调用 GPT-5 根据 prompt 生成个性化的"一件小事"
2. **本地预设池**（兜底）：从 reference/index.html 中的 100 条任务迁移过来，在 LLM 不可用时使用

### 2.4 LLM Prompt 设计方向

```
你是"啾啾小事"的任务生成器。请生成一件现在就能做的小事。

要求：
- 5分钟以内可以完成
- 不需要特殊工具或准备
- 语气温柔、无压力
- 附带一句简短的鼓励语（soft prompt）
- 返回 JSON 格式：{ category, text, minutes, soft }

分类范围：文学、艺术、写作、音乐、放松、好奇心、生活、家庭、学习、帮助
```

---

## 三、技术架构

### 3.1 技术栈

| 层面 | 选择 | 理由 |
|------|------|------|
| **框架** | Next.js 15 (App Router) + TypeScript | 前后端一体，部署简单 |
| **样式** | Tailwind CSS 4 | 快速迭代，响应式友好 |
| **动画** | Framer Motion | 扭蛋机、小肥鸟等复杂动画 |
| **小肥鸟渲染** | SVG 组件 | 可编程控制颜色和动画 |
| **LLM** | OpenAI SDK (GPT-5) | 先适配 OpenAI，通过 Adapter 支持扩展 |
| **状态** | React Context + localStorage | 轻量级，完成记录存本地 |
| **部署** | Vercel | 与 Next.js 天然配合 |

### 3.2 项目目录结构

```
little-thing/
├── .cursor/
│   └── rules/
│       └── workflow.md          # 工作流规范
├── docs/
│   ├── requirement.md           # 原始需求
│   ├── plan.md                  # 本计划文档
│   └── 小肥鸟.jpg               # 吉祥物参考图
├── reference/
│   └── index.html               # ChatGPT 生成的原版
├── src/
│   ├── app/
│   │   ├── layout.tsx           # 根布局
│   │   ├── page.tsx             # 首页
│   │   ├── globals.css          # 全局样式
│   │   └── api/
│   │       └── generate-task/
│   │           └── route.ts     # LLM 任务生成 API
│   ├── components/
│   │   ├── gashapon-machine.tsx  # 扭蛋机组件
│   │   ├── fat-bird.tsx         # 小肥鸟 SVG 组件
│   │   ├── egg.tsx              # 蛋壳组件
│   │   ├── task-bubble.tsx      # 对话气泡组件
│   │   ├── action-buttons.tsx   # 底部按钮组
│   │   └── weekly-counter.tsx   # 本周完成计数
│   ├── lib/
│   │   ├── llm/
│   │   │   ├── types.ts         # LLM 相关类型定义
│   │   │   ├── adapter.ts       # LLM Adapter 抽象
│   │   │   ├── openai.ts        # OpenAI Provider
│   │   │   └── prompt.ts        # Prompt 模板
│   │   ├── tasks.ts             # 本地预设任务池
│   │   ├── themes.ts            # 主题色彩配置
│   │   └── storage.ts           # localStorage 工具
│   └── assets/
│       └── (SVG 文件等)
├── public/
│   └── favicon.ico
├── .env.local                   # 环境变量（API Key 等，不提交）
├── .env.example                 # 环境变量模板
├── .gitignore
├── package.json
├── tsconfig.json
├── next.config.ts
├── tailwind.config.ts
└── README.md
```

### 3.3 LLM Adapter 架构

```typescript
// lib/llm/types.ts
interface Task {
  category: string;
  text: string;
  minutes: string;
  soft: string;    // 鼓励语
}

interface LLMProvider {
  generateTask(): Promise<Task>;
}

// lib/llm/adapter.ts
// 根据环境变量 LLM_PROVIDER 自动选择 Provider
// 失败时 fallback 到本地预设任务池
```

### 3.4 环境变量

```env
# .env.example
LLM_PROVIDER=openai          # openai | claude | ...
LLM_MODEL=gpt-5              # 模型名称
LLM_API_KEY=                  # API Key（用户自行填写）
LLM_TEMPERATURE=0.8           # 生成温度
LLM_BASE_URL=                 # 可选，自定义 API 端点
```

---

## 四、UI/UX 设计细节

### 4.1 色彩体系

**基础色板**（源自小肥鸟配色 + 治愈向调整）：
- 背景：`#FBF7F2` 暖米色
- 卡片/容器：`#FFFFFF` 白色，`CC` 透明度
- 主文字：`#2B2B2B` 深灰
- 辅助文字：`#7A746D` 暖灰
- 边线：`#E9E1D8` 米色线
- 强调：主题色动态变化（见 2.2 主题色彩系统）

### 4.2 字体

- 中文：PingFang SC / Noto Sans CJK SC
- 英文/数字：Inter / system-ui
- 整体字重偏细，营造轻盈感

### 4.3 视觉风格关键词

**温暖、圆润、柔软、低饱和度、留白、呼吸感**

- 大圆角（24-32px）
- 柔和阴影（模糊度大、透明度低）
- 充足留白
- 动画节奏：偏慢、有弹性（spring 物理动画）

### 4.4 响应式策略

- **移动端优先**（主要使用场景）
- 扭蛋机和小肥鸟在不同屏幕尺寸下等比缩放
- 桌面端最大宽度 480px 居中显示（保持手机 App 感）

---

## 五、实施阶段

### Phase 0：项目初始化（~30 分钟）
- [ ] 初始化 Next.js 15 + TypeScript 项目
- [ ] 配置 Tailwind CSS 4
- [ ] 配置 ESLint、Prettier
- [ ] 创建 `.env.example` 和 `.gitignore`
- [ ] 初始化 Git 仓库

### Phase 1：小肥鸟 SVG + 核心 UI 组件（~2 小时）
- [ ] 基于照片绘制矢量版小肥鸟 SVG（基础造型）
- [ ] 实现小肥鸟 React 组件（支持主题色配饰切换）
- [ ] 实现蛋壳组件（支持主题色）
- [ ] 实现扭蛋机静态 UI
- [ ] 实现任务展示卡片 / 对话气泡
- [ ] 实现底部按钮组（"换一颗蛋"、"我去做了"）
- [ ] 实现本周完成计数组件
- [ ] 搭建首页布局

### Phase 2：动画与交互（~2 小时）
- [ ] 小肥鸟 idle 摇晃动画
- [ ] 扭蛋机手柄旋转 + 机器抖动
- [ ] 蛋滚出 + 裂开动画
- [ ] 小肥鸟从蛋中弹出动画
- [ ] 对话气泡出现动画
- [ ] 完成后小肥鸟开心跳跃
- [ ] 按钮交互反馈
- [ ] 串联完整交互流程

### Phase 3：后端 + LLM 集成（~1 小时）
- [ ] 实现 LLM 类型定义和 Adapter 抽象层
- [ ] 实现 OpenAI GPT-5 Provider
- [ ] 设计并调试 Prompt
- [ ] 实现 API Route `/api/generate-task`
- [ ] 实现 Fallback 机制（本地预设任务池）
- [ ] 迁移 reference/index.html 中的 100 条任务数据
- [ ] 前端对接 API

### Phase 4：状态管理 + 细节完善（~1 小时）
- [ ] localStorage 读写封装
- [ ] 本周完成计数逻辑
- [ ] 加载状态 UI（扭蛋过程中等待 LLM 响应）
- [ ] 错误处理（网络失败、API 错误等）
- [ ] 空状态 / 首次使用引导

### Phase 5：打磨 + 部署（~1 小时）
- [ ] 响应式适配测试（手机 / 平板 / 桌面）
- [ ] 动画性能优化
- [ ] favicon 和 meta 信息
- [ ] 编写 README.md
- [ ] 部署到 Vercel

---

## 六、风险与应对

| 风险 | 应对方案 |
|------|---------|
| LLM 响应慢，扭蛋动画等待时间长 | 动画至少播 2 秒，和 LLM 请求并行；若 LLM 还没返回则继续播待机动画 |
| LLM 生成的任务质量不稳定 | 精心设计 prompt + 输出格式校验 + 兜底到本地任务池 |
| SVG 小肥鸟绘制复杂 | 先实现简化版（保留核心特征），后续迭代优化 |
| 主题配饰增加 SVG 复杂度 | 配饰独立为叠加层，基础鸟体不变 |

---

## 七、待确认事项

1. ~~中文名~~ → 已确认：**啾啾小事**
2. ~~底部按钮文字~~ → 已确认：**"换一颗蛋"** / **"我去做了"**
3. 是否需要用户登录/账号系统？（当前计划为纯本地存储，无需登录）
4. 是否需要分享功能（如分享完成的小事到社交媒体）？
5. 是否有已购买的域名？
6. OpenAI API Key 是否已准备好？
